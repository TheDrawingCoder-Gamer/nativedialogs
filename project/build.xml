<xml>
<set name="platform_dir" value="${haxelib:systools}project/src/mac/" if="macos"/>
<set name="platform_dir" value="${haxelib:systools}project/src/win/" if="windows"/>
<set name="platform_dir" value="${haxelib:systools}project/src/linux/" if="linux"/>

<files id="systools" dir="${haxelib:systools}project/src">
	<compilerflag value="-I${haxelib:systools}project/src"/>
	<compilerflag value="$(pkg-config --libs --cflags gtk+-3.0)" if="linux"/>
	<file name="apicpp.cpp" />
	<file name="${platform_dir}dialogs.c" />
	<file name="${platform_dir}misc.c" />
</files>

<files id="mac" dir="${haxelib:systools}project/src">
	<compilerflag value="-I${haxelib:systools}project/src"/>
	<file name="apicpp.cpp" />
	<file name="mac/dialogs.m" />
	<file name="mac/misc.m" />
</files>

<target id="systools">
  <files id="systools" unless="macos"/>
  <files id="mac" if="macos"/>

  <lib name="kernel32.lib" if="windows"/>
  <lib name="user32.lib" if="windows"/>
  <lib name="comdlg32.lib" if="windows"/>
  <lib name="advapi32.lib" if="windows"/>
  <lib name="shell32.lib" if="windows"/>
  <lib name="-lgtk+3" if="linux"/>
  <vflag name="-framework" value="IOKit" if="macos"/>
  <vflag name="-framework" value="Foundation" if="macos"/>
  <vflag name="-framework" value="Carbon" if="macos"/>
</target>

<target id="default"> <target id="systools" /> </target>
</xml>
